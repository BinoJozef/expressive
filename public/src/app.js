function checkAuth($cookies,auth){var token=$cookies.get("token");return token?auth.checkLogin(token).then(function(res){return res.data.success?res.data.user:!1},function(err){return!1}):!1}var app=angular.module("App",["ngRoute","ngMaterial","Service","ngCookies","md.data.table"]);app.config(function($routeProvider,$locationProvider){$routeProvider.when("/login",{templateUrl:"/template/login.html",controller:"LoginCtrl"}).when("/home",{template:"<h1>Home Page</h1>",controller:"HomeCtrl"}).when("/user",{templateUrl:"/template/user.html",controller:"UserCtrl"}).otherwise({redirectTo:"/home"}),$locationProvider.html5Mode(!0)}).config(function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("blue").accentPalette("light-blue")}),app.controller("NavCtrl",function($scope,$mdSidenav,auth,$cookies,$window){var userAuth=checkAuth($cookies,auth);$scope.loggedin=!1,userAuth&&($scope.loggedin=!0),$scope.toggleLeft=function(){$mdSidenav("left").toggle()},$scope.close=function(){$mdSidenav("left").close()},$scope.logout=function(){$cookies.remove("token"),$window.location.href="/home"}}).controller("LoginCtrl",function($scope,$window,auth,$cookies,$location){checkAuth($cookies,auth)&&$location.path("/home"),$scope.doLogin=function(){auth.doLogin(this.user).then(function(res){$cookies.put("token",res.data.token),res.data.success?$window.location.href="/home":$scope.message=res.data.message},function(err){console.log(err)})};var height=$window.innerHeight;$scope.top=height/6}).controller("HomeCtrl",function($scope,$location){}).controller("UserCtrl",function($scope,$location,user){$scope.promise=!1,user.getUsers().then(function(res){$scope.promise=!0,$scope.users=res.data,$scope.onReorder=function(order){console.log(order)}},function(err){$location.path("/login")})});