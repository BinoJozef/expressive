function checkAuth($cookies,auth){var token=$cookies.get("token");return token?auth.checkLogin(token).then(function(res){return res.data.success?res.data.user:!1},function(err){return!1}):!1}angular.module("App",["ngRoute","ngCookies","ngMaterial","Service","Function","Controller","md.data.table"]).config(function($routeProvider,$locationProvider){$routeProvider.when("/dashboard",{templateUrl:"/templates/dashboard.html",controller:"DashboardCtrl"}).when("/login",{templateUrl:"/templates/login.html",controller:"LoginCtrl"}).when("/table",{templateUrl:"/templates/table.html",controller:"TableCtrl"}).otherwise({redirectTo:"/dashboard"}),$locationProvider.html5Mode(!0)}).config(function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("blue").accentPalette("light-blue")}).directive("navMenu",function(){return{restrict:"E",templateUrl:"templates/side-menu.html"}}),angular.module("Controller",[]).controller("NavCtrl",function($scope,$mdSidenav,auth,$cookies,$window){var userAuth=checkAuth($cookies,auth);$scope.loggedin=!1,userAuth&&($scope.loggedin=!0),$scope.toggleLeft=function(){$mdSidenav("left").toggle()},$scope.close=function(){$mdSidenav("left").close()},$scope.logout=function(){$cookies.remove("token"),$window.location.href="/home"}}).controller("DashboardCtrl",function($scope,$location){}).controller("LoginCtrl",function($scope,$window,auth,$cookies,$location){checkAuth($cookies,auth)&&$location.path("/home"),$scope.promise=!1,$scope.doLogin=function(){$scope.promise=!0,auth.doLogin(this.user).then(function(res){$cookies.put("token",res.data.token),console.log("tes"),res.data.success?$window.location.href="/home":($scope.promise=!1,$scope.message=res.data.message)},function(err){$scope.promise=!1,console.log(err)})};var height=$window.innerHeight;$scope.top=height/6}).controller("TableCtrl",function($scope,$location,$q,user){function getUser(params){var deferred=$q.defer();$scope.promise=deferred.promise,user.getUsers(params).then(function(res){$scope.users=res.data.users,$scope.pagination.total=res.data.countAll,deferred.resolve(),$scope.onReorder=function(order){console.log(order)}},function(err){$location.path("/login")})}$scope.pagination={page:1,limit:5},getUser({limit:$scope.pagination.limit}),$scope.onPaginate=function(page,limit){var offset=(page-1)*limit;getUser({limit:limit,offset:offset})}}),angular.module("Function",[]);var app=angular.module("Service",["ngCookies"]);app.service("auth",function($http){var url="/api/auth";this.doLogin=function(user){return $http.post(url,user)},this.checkLogin=function(token){return $http.get("/api/authenticated/?token="+token)}}).service("user",function($http,$cookies){var url="/api/user",token=$cookies.get("token"),pathToken=token?"?token="+token:"";this.getUsers=function(params){return $http.get(url+pathToken,{params:params})},this.getUser=function(id){return $http.get(url+"/"+id+pathToken)},this.countUser=function(params){return $http.get(url,{params:params})}});